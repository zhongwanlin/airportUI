(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fcca8c5"],{"97d9":function(e,t,a){},eb92:function(e,t,a){"use strict";a("97d9")},ff12:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"searchWrap"},[a("div",{staticClass:"search"},[a("table",[a("tr",[a("td",[e._v("\n                          设备名称\n                        "),[a("Input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入设备名称"},model:{value:e.searchInfo.name,callback:function(t){e.$set(e.searchInfo,"name",t)},expression:"searchInfo.name"}})],e._v("\n                          机器码\n                        "),[a("Input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入机器码"},model:{value:e.searchInfo.mac_id,callback:function(t){e.$set(e.searchInfo,"mac_id",t)},expression:"searchInfo.mac_id"}})],e._v("\n                          区域\n                        "),[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.searchInfo.area_id,callback:function(t){e.$set(e.searchInfo,"area_id",t)},expression:"searchInfo.area_id"}},e._l(e.areaList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],e._v("\n                          部署状态\n                        "),[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.searchInfo.dep_status,callback:function(t){e.$set(e.searchInfo,"dep_status",t)},expression:"searchInfo.dep_status"}},[a("Option",{attrs:{value:1}},[e._v("入场")]),a("Option",{attrs:{value:2}},[e._v("撤场")]),a("Option",{attrs:{value:3}},[e._v("激活")])],1)],[a("div",{staticClass:"searchBtnList"},[a("Button",{attrs:{type:"primary",icon:"ios-add-circle"},on:{click:e.showNew}},[e._v("新增")]),a("Button",{attrs:{icon:"ios-refresh-circle"},on:{click:e.reflesh}},[e._v("重置")])],1)]],2)])])])]),a("div",{staticClass:"tableList"},[[a("Table",{attrs:{height:e.height-100,border:"",stripe:"",loading:e.isLoading,columns:e.columnsRealTime,data:e.realTimeDataList},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.row;t.index;return[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showEdit(i)}}},[e._v("修改")]),e._v("  \n                    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.deleteAction(i)}}},[e._v("删除")])]}},{key:"dep_status",fn:function(t){var a=t.row;t.index;return[e._v("\n                    "+e._s(["入场","撤场","激活"][a.dep_status-1])+"\n                ")]}}])})]],2),a("div",{staticClass:"pageWrap"},[[a("Page",{attrs:{total:e.count,"page-size":50,"page-size-opts":[50,100,150],"show-sizer":"",showTotal:""},on:{"on-change":e.pageSizeChange,"on-page-size-change":e.pageRowChange}})]],2),[a("Modal",{staticClass:"noContentPadding noHeaderModal",attrs:{"mask-closable":!1,width:"30",styles:{top:"5%"},title:"角色录入"},on:{"on-cancel":function(t){e.isDetail=!1}},model:{value:e.isDetail,callback:function(t){e.isDetail=t},expression:"isDetail"}},[a("div",{staticClass:"modalTable"},[a("div",{staticClass:"detail"},[a("table",[a("tr",[a("td",[a("span",{staticClass:"request"},[e._v("*")]),e._v("设备名称：\n                                "),a("div",[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"填写设备名称"},model:{value:e.itemInfo.name,callback:function(t){e.$set(e.itemInfo,"name",t)},expression:"itemInfo.name"}})],1)])]),a("tr",[a("td",[e._v("\n                                机器码：\n                                "),a("div",[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"填写机器码"},model:{value:e.itemInfo.mac_id,callback:function(t){e.$set(e.itemInfo,"mac_id",t)},expression:"itemInfo.mac_id"}})],1)])]),a("tr",[a("td",[e._v("\n                                SDK版本：\n                                "),a("div",[a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择SDK版本"},model:{value:e.itemInfo.version,callback:function(t){e.$set(e.itemInfo,"version",t)},expression:"itemInfo.version"}},e._l(e.versionList,(function(t){return a("Option",{key:t.id,attrs:{value:t.version}},[e._v(e._s(t.version))])})),1)],1)])]),a("tr",[a("td",[e._v("\n                                所在区域：\n                                "),a("div",[a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择所在区域"},model:{value:e.itemInfo.area_id,callback:function(t){e.$set(e.itemInfo,"area_id",t)},expression:"itemInfo.area_id"}},e._l(e.areaList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)])]),a("tr",[a("td",[e._v("\n                                部署状态：\n                                "),a("div",[a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择部署状态"},model:{value:e.itemInfo.dep_status,callback:function(t){e.$set(e.itemInfo,"dep_status",t)},expression:"itemInfo.dep_status"}},[a("Option",{attrs:{value:1}},[e._v("入场")]),a("Option",{attrs:{value:2}},[e._v("撤场")]),a("Option",{attrs:{value:3}},[e._v("激活")])],1)],1)])])])])]),a("div",{staticClass:"modalFooter",attrs:{slot:"footer"},slot:"footer"},[[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"default"},on:{click:function(t){e.isDetail=!1}}},[e._v("关闭")]),a("Button",{attrs:{type:"primary",disable:e.disable},on:{click:e.saveAction}},[e._v("提交")])]],2)])]],2)},n=[],s=(a("a450"),{name:"role",components:{},data:function(){return{userInfo:null,height:window.innerHeight,isModalLoading:!1,isDetail:!1,isFunction:!1,isInfo:!1,disable:!1,isLoading:!1,count:0,pageInfo:{pageIndex:0,pageSize:50},searchInfo:{area_id:"",dep_status:"",id:"",mac_id:"",name:"",version:""},itemInfo:{area_id:"",dep_status:"",id:"",mac_id:"",name:"",version:""},columnsRealTime:[{align:"center",title:"序号",type:"index",width:60},{title:"设备名称",align:"center",key:"name"},{title:"所在区域",align:"center",key:"areaName"},{title:"机器码",align:"center",key:"mac_id"},{title:"SDK版本",align:"center",key:"version"},{title:"部署状态",align:"center",key:"dep_status",slot:"dep_status"},{title:"创建时间",align:"center",key:"create_time"},{title:"更新时间",align:"center",key:"update_time"},{align:"center",title:"操作",width:220,slot:"action"}],realTimeDataList:[],areaList:[],versionList:[]}},methods:{pageSizeChange:function(e){var t=this;t.pageInfo.pageIndex=parseInt(e,10),t.getList(!0)},pageRowChange:function(e){var t=this;t.pageInfo.pageSize=parseInt(e,10),t.getList(!1)},reflesh:function(){var e=this;e.getList(!0),e.getAreaList(!0),e.getVersionList(!0)},getList:function(e){var t=this;1==e&&(t.isLoading=!0,t.pageInfo.pageIndex=0),t.axios({method:"get",headers:{token:t.userInfo.token},url:t.$config.action.marchineList,params:{pageNum:t.pageInfo.pageIndex,pageSize:t.pageInfo.pageSize,area_id:t.searchInfo.area_id,dep_status:t.searchInfo.dep_status,mac_id:t.searchInfo.mac_id,status:t.searchInfo.status,version:t.searchInfo.version,name:t.searchInfo.name}}).then((function(e){t.realTimeDataList=e.data.list,t.count=e.data.total,"0"==e.data.code?(t.realTimeDataList=e.data.data,t.count=e.data.count):"9003"==e.data.code?t.utility.loginTimeOut(t):t.$Message.error(e.data.msg),t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},showNew:function(){var e=this;e.itemInfo={area_id:"",dep_status:"",id:"",mac_id:"",name:"",version:""},e.isDetail=!0},showEdit:function(e){var t=this;for(var a in e)t.itemInfo[a]=e[a];t.isDetail=!0},showInfo:function(e){var t=this;for(var a in e)t.itemInfo[a]=e[a];t.isInfo=!0},saveAction:function(){var e=this;e.itemInfo.name?e.itemInfo.mac_id?(e.disable=!0,e.axios({method:"post",headers:{token:e.userInfo.token},url:e.itemInfo.id?e.$config.action.marchineEdit:e.$config.action.marchineAdd,data:{id:e.itemInfo.id||0,area_id:e.itemInfo.area_id,dep_status:e.itemInfo.dep_status,mac_id:e.itemInfo.mac_id,name:e.itemInfo.name,version:e.itemInfo.version}}).then((function(t){"0"==t.data.code?(e.$Message.success("提交成功"),e.getList(!1),e.isDetail=!1,e.itemInfo={id:"",area_id:"",dep_status:"",mac_id:"",name:"",version:""}):"9003"==t.data.code?e.utility.loginTimeOut(e):e.$Message.error(t.data.msg),e.disable=!1})).catch((function(t){console.log(t),e.disable=!1}))):e.$Message.error("请输入机器码"):e.$Message.error("请输入设备名称")},deleteAction:function(e){var t=this;t.$Modal.confirm({title:"确定删除"+e.name+"?",onOk:function(){t.axios({method:"post",headers:{token:t.userInfo.token},url:t.$config.action.marchineDelete,data:{id:e.id}}).then((function(e){"0"==e.data.code?(t.$Message.success("删除成功"),t.getList(!0)):"9003"==e.data.code?t.utility.loginTimeOut(t):t.$Message.error(e.data.msg)})).catch((function(e){console.log(e)}))}})},getAreaList:function(e){var t=this;t.axios({method:"get",headers:{token:t.userInfo.token},url:t.$config.action.areaList,params:{pageNum:1,pageSize:1e4,e_name:"",name:""}}).then((function(e){t.areaList=e.data.list,t.count=e.data.total,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},getVersionList:function(e){var t=this;1==e&&(t.isLoading=!0,t.pageInfo.pageIndex=0),t.axios({method:"get",headers:{token:t.userInfo.token},url:t.$config.action.versionList,params:{pageNum:1,pageSize:1e4}}).then((function(e){t.versionList=e.data.list})).catch((function(e){console.log(e),t.isLoading=!1}))}},created:function(){var e=this,t=null;e.userInfo=e.$utility.getLocalStorage("userInfo"),e.getAreaList(!0),e.getVersionList(!0),e.realTimeDataList=[{areaName:"231234",dep_status:1,id:0,mac_id:"v029228282828",name:"设备名称",version:"V0001",create_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"]},{areaName:"231234",dep_status:1,id:0,mac_id:"v029228282828",name:"设备名称",version:"V0001",create_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"]},{areaName:"231234",dep_status:1,id:0,mac_id:"v029228282828",name:"设备名称",version:"V0001",create_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"]},{areaName:"231234",dep_status:1,id:0,mac_id:"v029228282828",name:"设备名称",version:"V0001",create_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:e.$utility.getCurrentTimeInfo(new Date)["formatDate"]}],e.$watch("searchInfo",(function(){clearTimeout(t),t=setTimeout((function(){e.getList(!0)}),200)}),{deep:!0})},mounted:function(){var e=this,t=null;window.onresize=function(){clearTimeout(t),t=setTimeout((function(){e.height=window.innerHeight}),500)}},beforeDestroy:function(){clearInterval(window.recordTime)}}),o=s,r=(a("eb92"),a("5d22")),c=Object(r["a"])(o,i,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2fcca8c5.a6d831f5.js.map