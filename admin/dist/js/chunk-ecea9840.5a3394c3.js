(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecea9840"],{4345:function(t,e,i){"use strict";i("f560")},"68e5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"searchWrap"},[i("div",{staticClass:"search"},[i("table",[i("tr",[i("td",[t._v("\n                          版本名称\n                        "),[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入版本名称"},model:{value:t.searchInfo.info,callback:function(e){t.$set(t.searchInfo,"info",e)},expression:"searchInfo.info"}})],[i("div",{staticClass:"searchBtnList"},[i("Button",{attrs:{type:"primary",icon:"ios-add-circle"},on:{click:t.showNew}},[t._v("新增")]),i("Button",{attrs:{icon:"ios-refresh-circle"},on:{click:t.reflesh}},[t._v("重置")])],1)]],2)])])])]),i("div",{staticClass:"tableList"},[[i("Table",{attrs:{height:t.height-100,border:"",stripe:"",loading:t.isLoading,columns:t.columnsRealTime,data:t.realTimeDataList},scopedSlots:t._u([{key:"status",fn:function(e){var n=e.row;e.index;return[[i("i-switch",{attrs:{size:"large",value:n.status,"true-value":1,"false-value":0},on:{"on-change":function(e){return t.enableOrNot(0==n.status?"1":"0",n)}}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),i("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])]]}},{key:"action",fn:function(e){var n=e.row;e.index;return[i("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showEdit(n)}}},[t._v("修改")]),t._v("  \n                    "),i("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteAction(n)}}},[t._v("删除")])]}}])})]],2),i("div",{staticClass:"pageWrap"},[[i("Page",{attrs:{total:t.count,"page-size":50,"page-size-opts":[50,100,150],"show-sizer":"",showTotal:""},on:{"on-change":t.pageSizeChange,"on-page-size-change":t.pageRowChange}})]],2),[i("Modal",{staticClass:"noContentPadding noHeaderModal",attrs:{"mask-closable":!1,width:"30",styles:{top:"5%"},title:"角色录入"},on:{"on-cancel":function(e){t.isDetail=!1}},model:{value:t.isDetail,callback:function(e){t.isDetail=e},expression:"isDetail"}},[i("div",{staticClass:"modalTable"},[i("div",{staticClass:"detail"},[i("table",[i("tr",[i("td",[i("span",{staticClass:"request"},[t._v("*")]),t._v("版本号：\n                                "),i("div",[i("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"填写版本号"},model:{value:t.itemInfo.version,callback:function(e){t.$set(t.itemInfo,"version",e)},expression:"itemInfo.version"}})],1)])]),i("tr",[i("td",[i("span",{staticClass:"request"},[t._v("*")]),t._v("版本描述：\n                                "),i("div",[i("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"填写版本描述"},model:{value:t.itemInfo.info,callback:function(e){t.$set(t.itemInfo,"info",e)},expression:"itemInfo.info"}})],1)])]),i("tr",[i("td",[i("span",{staticClass:"request"},[t._v("*")]),t._v("更新包MD5：\n                                "),i("div",[i("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"填写更新包MD5"},model:{value:t.itemInfo.md5,callback:function(e){t.$set(t.itemInfo,"md5",e)},expression:"itemInfo.md5"}})],1)])]),i("tr",[i("td",[i("span",{staticClass:"request"},[t._v("*")]),t._v("更新包：\n                                "),i("div",[[i("Upload",{attrs:{headers:{token:t.userInfo.token},action:t.$config.action.setFileUpload,disabled:t.disable,"show-upload-list":t.isShowUploadList,"on-error":t.errorUpload,"on-progress":t.progressing,"on-success":t.uploadSuccess}},[i("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传更新包")])],1)]],2),i("div",[t._v(t._s(t.itemInfo.url))])])])])])]),i("div",{staticClass:"modalFooter",attrs:{slot:"footer"},slot:"footer"},[[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"default"},on:{click:function(e){t.isDetail=!1}}},[t._v("关闭")]),i("Button",{attrs:{type:"primary",disable:t.disable},on:{click:t.saveAction}},[t._v("提交")])]],2)])]],2)},o=[],a=(i("a450"),{name:"role",components:{},data:function(){return{userInfo:null,height:window.innerHeight,isModalLoading:!1,isDetail:!1,isFunction:!1,isInfo:!1,disable:!1,isLoading:!1,isShowUploadList:!1,count:0,pageInfo:{pageIndex:0,pageSize:50},searchInfo:{info:""},itemInfo:{id:0,info:"",md5:"",url:"",version:""},columnsRealTime:[{align:"center",title:"序号",type:"index",width:60},{title:"版本",align:"left",key:"version",width:100},{title:"更新包MD5",align:"left",key:"md5",width:260},{title:"下载包地址",align:"left",key:"url"},{title:"版本描述",align:"left",key:"info",width:150},{title:"终端更新时间",align:"center",key:"update_time",width:240},{align:"center",title:"状态",width:120,slot:"status"},{align:"center",title:"操作",width:120,slot:"action"}],realTimeDataList:[]}},methods:{pageSizeChange:function(t){var e=this;e.pageInfo.pageIndex=parseInt(t,10),e.getList(!0)},pageRowChange:function(t){var e=this;e.pageInfo.pageSize=parseInt(t,10),e.getList(!1)},reflesh:function(){var t=this;t.getList(!0)},getList:function(t){var e=this;1==t&&(e.isLoading=!0,e.pageInfo.pageIndex=0),e.axios({method:"get",headers:{token:e.userInfo.token},url:e.$config.action.versionList,params:{pageNum:e.pageInfo.pageIndex,pageSize:e.pageInfo.pageSize,info:e.searchInfo.info,version:e.searchInfo.version}}).then((function(t){e.realTimeDataList=t.data.list,e.count=t.data.total,e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1}))},showNew:function(){var t=this;t.itemInfo={id:0,info:"",md5:"",url:"",version:""},t.isDetail=!0},showEdit:function(t){var e=this;for(var i in t)e.itemInfo[i]=t[i];e.isDetail=!0},showInfo:function(t){var e=this;for(var i in t)e.itemInfo[i]=t[i];e.isInfo=!0},saveAction:function(){var t=this;0!=t.itemInfo.version.trim().length?0!=t.itemInfo.info.trim().length?0!=t.itemInfo.url.trim().length?(t.disable=!0,t.axios({method:"post",headers:{token:t.userInfo.token},url:t.itemInfo.id?t.$config.action.versionEdit:t.$config.action.versionAdd,data:{id:t.itemInfo.id||0,info:t.itemInfo.info,md5:t.itemInfo.md5,url:t.itemInfo.url,version:t.itemInfo.version}}).then((function(e){"0"==e.data.code?(t.$Message.success("提交成功"),t.getList(!1),t.isDetail=!1,t.isShowUploadList=!1,t.itemInfo={id:0,info:"",md5:"",url:"",version:""}):"9003"==e.data.code?t.utility.loginTimeOut(t):t.$Message.error(e.data.msg),t.disable=!1})).catch((function(e){console.log(e),t.disable=!1,t.isShowUploadList=!1}))):t.$Message.error("请上传更新包"):t.$Message.error("请输入版本描述"):t.$Message.error("请输入版本号")},deleteAction:function(t){var e=this;e.$Modal.confirm({title:"确定删除"+t.name+"?",onOk:function(){e.axios({method:"post",headers:{token:e.userInfo.token},url:e.$config.action.configDelete,data:{id:t.id}}).then((function(t){"0"==t.data.code?(e.$Message.success("删除成功"),e.getList(!0)):"9003"==t.data.code?e.utility.loginTimeOut(e):e.$Message.error(t.data.msg)})).catch((function(t){console.log(t)}))}})},enableOrNot:function(t,e){var i=this;i.axios({method:"post",headers:{token:i.userInfo.token},url:1==t?i.$config.action.versionEnable:i.$config.action.versionDisable,data:{id:e.id}}).then((function(t){"0"==t.data.code?(i.$Message.success("修改成功"),i.getList(!1)):"419"==t.data.code?i.$utility.loginTimeOut(i):i.$Message.error(t.data.msg)})).catch((function(t){console.log(t)}))},progressing:function(){var t=this;t.disabled=!0},errorUpload:function(){var t=this;t.disabled=!1,console.log(error)},uploadSuccess:function(t,e,i){var n=this;n.disabled=!1,t.data&&t.data.length>0?(console.log(t,e,i),n.itemInfo.url=n.$config.imgPath+t.data,n.isShowUploadList=!0):(console.log(t,e,i),n.$Message.error({content:t.data.result,duration:5}))}},created:function(){var t=this,e=null;t.userInfo=t.$utility.getLocalStorage("userInfo"),t.realTimeDataList=[{id:0,info:"测试",md5:"asd23723asfiqwe89q232",url:"http://www.baidu.com",version:"v0202020",create_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"]},{id:0,info:"测试",md5:"asd23723asfiqwe89q232",url:"http://www.baidu.com",version:"v0202020",create_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"]},{id:0,info:"测试",md5:"asd23723asfiqwe89q232",url:"http://www.baidu.com",version:"v0202020",create_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"],update_time:t.$utility.getCurrentTimeInfo(new Date)["formatDate"]}],t.$watch("searchInfo",(function(){clearTimeout(e),e=setTimeout((function(){t.getList(!0)}),200)}),{deep:!0})},mounted:function(){var t=this,e=null;window.onresize=function(){clearTimeout(e),e=setTimeout((function(){t.height=window.innerHeight}),500)}},beforeDestroy:function(){clearInterval(window.recordTime)}}),s=a,r=(i("4345"),i("5d22")),l=Object(r["a"])(s,n,o,!1,null,null,null);e["default"]=l.exports},f560:function(t,e,i){}}]);
//# sourceMappingURL=chunk-ecea9840.5a3394c3.js.map