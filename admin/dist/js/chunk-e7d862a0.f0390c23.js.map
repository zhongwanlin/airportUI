{"version":3,"sources":["webpack:///./src/pages/system/users.vue?85e0","webpack:///src/pages/system/users.vue","webpack:///./src/pages/system/users.vue?56cb","webpack:///./src/pages/system/users.vue","webpack:///./src/pages/system/users.vue?49e7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","attrs","treeData","model","value","searchInfo","callback","$$v","$set","expression","on","showNew","reflesh","height","isLoading","columnsRealTime","realTimeDataList","scopedSlots","_u","key","fn","ref","row","index","$event","showEdit","status","enableOrNot","slot","count","pageSizeChange","pageRowChange","top","isDetail","style","maxHeight","overflowY","itemInfo","newPassword","_l","item","name","_s","disable","saveAction","staticRenderFns","component"],"mappings":"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","file":"js/chunk-e7d862a0.f0390c23.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"searchWrap\"},[_c('div',{staticClass:\"search\"},[_c('table',[_c('tr',[_c('td',[_vm._v(\"\\n                          部门:\\n                        \"),[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('Cascader',{staticStyle:{\"width\":\"400px\"},attrs:{\"data\":_vm.treeData},model:{value:(_vm.searchInfo.orgids),callback:function ($$v) {_vm.$set(_vm.searchInfo, \"orgids\", $$v)},expression:\"searchInfo.orgids\"}})],1)],_vm._v(\"\\n                        \\n                          用户名:\\n                        \"),[_c('Input',{staticStyle:{\"width\":\"200px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.searchInfo.userName),callback:function ($$v) {_vm.$set(_vm.searchInfo, \"userName\", $$v)},expression:\"searchInfo.userName\"}})],[_c('div',{staticClass:\"searchBtnList\"},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-add-circle\"},on:{\"click\":_vm.showNew}},[_vm._v(\"新增\")]),_c('Button',{attrs:{\"icon\":\"ios-refresh-circle\"},on:{\"click\":_vm.reflesh}},[_vm._v(\"重置\")])],1)]],2)])])])]),_c('div',{staticClass:\"tableList\"},[[_c('Table',{attrs:{\"height\":_vm.height-100,\"border\":\"\",\"stripe\":\"\",\"loading\":_vm.isLoading,\"columns\":_vm.columnsRealTime,\"data\":_vm.realTimeDataList},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showEdit(row)}}},[_vm._v(\"修改\")]),_vm._v(\"  \\n                \")]}},{key:\"status\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [[_c('i-switch',{attrs:{\"size\":\"large\",\"value\":row.status,\"true-value\":1,\"false-value\":0},on:{\"on-change\":function($event){return _vm.enableOrNot(row.status==0?'1':'0', row)}}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"启用\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"禁用\")])])]]}}])})]],2),_c('div',{staticClass:\"pageWrap\"},[[_c('Page',{attrs:{\"total\":_vm.count,\"page-size\":50,\"page-size-opts\":[50, 100, 150],\"show-sizer\":\"\",\"showTotal\":\"\"},on:{\"on-change\":_vm.pageSizeChange,\"on-page-size-change\":_vm.pageRowChange}})]],2),[_c('Modal',{staticClass:\"noContentPadding noHeaderModal\",attrs:{\"mask-closable\":false,\"width\":\"30\",\"styles\":{top: '5%'},\"title\":\"新增/修改账号\"},on:{\"on-cancel\":function($event){_vm.isDetail=false}},model:{value:(_vm.isDetail),callback:function ($$v) {_vm.isDetail=$$v},expression:\"isDetail\"}},[_c('div',{staticClass:\"modalTable\"},[_c('div',{staticClass:\"detail\",style:({maxHeight: (_vm.height-100)+'px',overflowY: 'auto'})},[_c('table',[_c('tr',[_c('td',[_c('span',{staticClass:\"request\"},[_vm._v(\"*\")]),_vm._v(\"所在部门：\\n                                \"),_c('div',[_c('Cascader',{attrs:{\"data\":_vm.treeData},model:{value:(_vm.itemInfo.orgids),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"orgids\", $$v)},expression:\"itemInfo.orgids\"}})],1)])]),_c('tr',[_c('td',[_c('span',{staticClass:\"request\"},[_vm._v(\"*\")]),_vm._v(\"用户名：\\n                                \"),_c('div',[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"填写用户名,可由英文字母、数字组成\"},model:{value:(_vm.itemInfo.username),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"username\", $$v)},expression:\"itemInfo.username\"}})],1),_c('div',{staticClass:\"tips\"},[_vm._v(\"必填，可由英文字母、数字组成\")])])]),_c('tr',[_c('td',[_vm._v(\"\\n                                昵称：\\n                                \"),_c('div',[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"填写昵称,可以是中文\"},model:{value:(_vm.itemInfo.nickname),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"nickname\", $$v)},expression:\"itemInfo.nickname\"}})],1),_c('div',{staticClass:\"tips\"},[_vm._v(\"可以是中文\")])])]),_c('tr',[_c('td',[_c('span',{staticClass:\"request\"},[_vm._v(\"*\")]),_vm._v(\"密码：\\n                                \"),_c('div',[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"填写登录密码,至少6个字符,最多18个字符\"},model:{value:(_vm.newPassword),callback:function ($$v) {_vm.newPassword=$$v},expression:\"newPassword\"}})],1),_c('div',{staticClass:\"tips\"},[_vm._v(\"必填，至少6个字符,最多18个字符\")])])]),_c('tr',[_c('td',[_c('span',{staticClass:\"request\"},[_vm._v(\"*\")]),_vm._v(\"角色：\\n                                \"),_c('div',[[_c('Select',{staticStyle:{\"width\":\"100%\"},attrs:{\"clearable\":\"\",\"placeholder\":\"选择角色\"},model:{value:(_vm.itemInfo.rolename),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"rolename\", $$v)},expression:\"itemInfo.rolename\"}},[_vm._l((_vm.roleList),function(item,index){return [_c('Option',{key:index,attrs:{\"value\":item.name}},[_vm._v(_vm._s(item.name))])]})],2)]],2),_c('div',{staticClass:\"tips\"},[_vm._v(\"非超级管理员，禁止创建与当前角色同级的用户\")])])]),_c('tr',[_c('td',[_vm._v(\"\\n                                手机号码：\\n                                \"),_c('div',[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"手机号码\"},model:{value:(_vm.itemInfo.mobile),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"mobile\", $$v)},expression:\"itemInfo.mobile\"}})],1)])]),_c('tr',[_c('td',[_vm._v(\"\\n                                邮箱：\\n                                \"),_c('div',[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"常用邮箱\"},model:{value:(_vm.itemInfo.email),callback:function ($$v) {_vm.$set(_vm.itemInfo, \"email\", $$v)},expression:\"itemInfo.email\"}})],1)])])])])]),_c('div',{staticClass:\"modalFooter\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[[_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"default\"},on:{\"click\":function($event){_vm.isDetail=false}}},[_vm._v(\"关闭\")]),_c('Button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.disable},on:{\"click\":_vm.saveAction}},[_vm._v(\"提交\")])]],2)])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"page\">\n        <div class=\"searchWrap\">\n            <div class=\"search\">\n                <table>\n                    <tr>\n                        <td>\n                            &nbsp;&nbsp;部门:\n                            <template>\n                                <div style=\"display: inline-block;\"><Cascader :data=\"treeData\" v-model=\"searchInfo.orgids\" style=\"width:400px;\"></Cascader></div>\n                            </template>\n                            \n                            &nbsp;&nbsp;用户名:\n                            <template>\n                                <Input v-model=\"searchInfo.userName\" clearable placeholder=\"请输入用户名\" style=\"width:200px;\"/>\n                            </template>\n                            <template>\n                                <div class=\"searchBtnList\">\n                                    <Button type=\"primary\" icon=\"ios-add-circle\" @click=\"showNew\">新增</Button>\n                                    <Button icon=\"ios-refresh-circle\" @click=\"reflesh\">重置</Button>\n                                </div>\n                            </template>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n\n        <div class=\"tableList\">\n            <template>\n                <Table :height=\"height-100\" border stripe :loading=\"isLoading\" :columns=\"columnsRealTime\" :data=\"realTimeDataList\">\n                    <template slot-scope=\"{ row, index }\" slot=\"action\">\n                        <Button type=\"primary\" size=\"small\" @click=\"showEdit(row)\">修改</Button>&nbsp;&nbsp;\n                    </template>\n\n                    <template slot-scope=\"{ row, index }\" slot=\"status\">\n                        <template>\n                            <i-switch size=\"large\" :value=\"row.status\" :true-value=\"1\" :false-value=\"0\" @on-change=\"enableOrNot(row.status==0?'1':'0', row)\">\n                                <span slot=\"open\">启用</span>\n                                <span slot=\"close\">禁用</span>\n                            </i-switch>\n                        </template>\n                    </template>\n                    \n                </Table>\n            </template>\n        </div>\n        <div class=\"pageWrap\">\n            <template>\n                <Page :total=\"count\" @on-change=\"pageSizeChange\" @on-page-size-change=\"pageRowChange\" :page-size=\"50\" :page-size-opts=\"[50, 100, 150]\" show-sizer showTotal />\n            </template>\n        </div>\n\n        <template>\n            <Modal v-model=\"isDetail\" class=\"noContentPadding noHeaderModal\" :mask-closable=\"false\" width=\"30\" :styles=\"{top: '5%'}\" title=\"新增/修改账号\" @on-cancel=\"isDetail=false\">\n                <div class=\"modalTable\">\n                    <div class=\"detail\" :style=\"{maxHeight: (height-100)+'px',overflowY: 'auto'}\">\n                        <table>\n                            <tr>\n                                <td>\n                                    <span class=\"request\">*</span>所在部门：\n                                    <div><Cascader :data=\"treeData\" v-model=\"itemInfo.orgids\"></Cascader></div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    <span class=\"request\">*</span>用户名：\n                                    <div><Input v-model=\"itemInfo.username\" placeholder=\"填写用户名,可由英文字母、数字组成\" style=\"width: 100%\" /></div>\n                                    <div class=\"tips\">必填，可由英文字母、数字组成</div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td >\n                                    昵称：\n                                    <div><Input v-model=\"itemInfo.nickname\" placeholder=\"填写昵称,可以是中文\" style=\"width: 100%\" /></div>\n                                    <div class=\"tips\">可以是中文</div>\n                                </td>\n                            </tr>\n                            \n                            <tr>\n                                <td>\n                                    <span class=\"request\">*</span>密码：\n                                    <div><Input v-model=\"newPassword\" placeholder=\"填写登录密码,至少6个字符,最多18个字符\" style=\"width: 100%\" /></div>\n                                    <div class=\"tips\">必填，至少6个字符,最多18个字符</div>\n                                </td>\n                            </tr>\n                            \n                            <tr>\n                                <td>\n                                    <span class=\"request\">*</span>角色：\n                                    <div>\n                                        <template>\n                                            <Select v-model=\"itemInfo.rolename\" clearable placeholder=\"选择角色\" style=\"width: 100%;\">\n                                                <template v-for=\"(item, index) in roleList\">\n                                                    <Option :value=\"item.name\" :key=\"index\">{{item.name}}</Option>\n                                                </template>\n                                            </Select>\n                                        </template>\n                                    </div>\n                                    <div class=\"tips\">非超级管理员，禁止创建与当前角色同级的用户</div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    手机号码：\n                                    <div><Input v-model=\"itemInfo.mobile\" placeholder=\"手机号码\" style=\"width: 100%\" /></div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    邮箱：\n                                    <div><Input v-model=\"itemInfo.email\" placeholder=\"常用邮箱\" style=\"width: 100%\" /></div>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n                <div slot=\"footer\" class=\"modalFooter\">\n                    <template>\n                        <Button type=\"default\" @click=\"isDetail=false\" style=\"margin-right: 5px\">关闭</Button>\n                        <Button type=\"primary\" @click=\"saveAction\" :disabled=\"disable\">提交</Button>\n                    </template>\n                </div>\n            </Modal>\n        </template>\n\n    </div>\n</template>\n\n<script>\nimport md5 from \"js-md5\";\nexport default {\n    name: \"user\",\n    components: { },\n    data: () => ({\n        userInfo: null,\n        userFuncInfo: null,\n        height: window.innerHeight,\n        isDetail: false,\n        disable: false,\n        isLoading: false,\n        userFuncCode: {},\n        count: 0,\n        pageInfo: {\n            pageIndex: 1,\n            pageSize: 50,\n        },\n        searchInfo: {\n            \"userCode\": \"\",\n            \"userName\": \"\",\n            \"orgid\": \"\",\n            \"orgids\": [],\n        },\n        itemInfo: {\n            \"id\": \"\",\n            \"email\": \"\",\n            \"mobile\": \"\",\n            \"roleid\": \"\",\n            \"nickname\": \"\",\n            \"password\": \"\",\n            \"username\": \"\",\n            \"orgid\": \"\",\n            \"orgids\": [],\n        },\n        newPassword: \"\",\n        columnsRealTime: [\n            {\n                align: \"center\",\n                title: \"序号\",\n                type: \"index\",\n                width: 60,\n            },\n            {\n                title: \"账号名\",\n                align: \"center\",\n                key: \"username\",\n            },\n            {\n                title: \"姓名\",\n                align: \"center\",\n                key: \"nickname\",\n            },\n            {\n                title: \"手机号\",\n                align: \"center\",\n                key: \"mobile\"\n            },\n            {\n                title: \"邮箱\",\n                align: \"center\",\n                key: \"email\",\n            },\n            {\n                title: \"角色\",\n                align: \"center\",\n                key: \"rolename\",\n            },\n            {\n                title: \"状态\",\n                align: \"center\",\n                key: \"status\",\n                slot: \"status\"\n            },\n            {\n                title: \"创建时间\",\n                align: \"center\",\n                key: \"create_time\",\n            },\n            {\n                align: \"center\",\n                title: \"操作\",\n                width: 120,\n                slot: 'action',\n            }\n        ],\n        realTimeDataList: [],\n        roleList: [],\n        treeData: []\n    }),\n    methods: {\n        pageSizeChange(value) {\n            var self = this;\n            self.pageInfo.pageIndex = parseInt(value, 10);\n            self.getList(true);\n        },\n        pageRowChange(value) {\n            var self = this;\n            self.pageInfo.pageSize = parseInt(value, 10);\n            self.getList(false);\n        },\n        reflesh(){\n            var self = this;\n            self.getList(true);\n            self.getRoleList();\n            self.getDepetList();\n        },\n\n        // 获取用户列表\n        getList(bool){\n            var self = this;\n            if (bool == true) {\n                self.isLoading = true;\n                self.pageInfo.pageIndex = 0;\n            }\n            self.axios({\n                method: 'get',\n                url: self.$config.action.userList,\n                params: {\n                    \"pageNum\": self.pageInfo.pageIndex,\n                    \"pageSize\": self.pageInfo.pageSize,\n                    \"orgid\": self.searchInfo.orgids[self.searchInfo.orgids.length-1],\n                }\n            })\n            .then(function (res) {\n                self.realTimeDataList = res.data.list;\n                self.count = res.data.total;\n                if(res.data.code=='0') {\n                    \n                } else if(res.data.code=='9003') {\n                    self.utility.loginTimeOut(self);\n                } else {\n                    self.$Message.error(res.data.msg);\n                }\n                self.isLoading = false;\n            })\n            .catch(function (error) {\n                console.log(error);\n                self.isLoading = false;\n            });\n        },\n        // 显示新增\n        showNew(){\n            let self = this;\n            self.itemInfo = {\n                \"id\": \"\",\n                \"email\": \"\",\n                \"roleid\": \"\",\n                \"mobile\": \"\",\n                \"nickname\": \"\",\n                \"password\": \"\",\n                \"username\": \"\",\n                \"orgids\": [],\n                \"orgid\": \"\",\n            };\n            self.isDetail = true;\n        },\n        // 显示编辑\n        showEdit(item){\n            let self = this;\n            let arr = [];\n            for(var key in item) {\n                self.itemInfo[key] = item[key];\n            }\n            self.itemInfo.orgids = [];\n            self.isDetail = true;\n\n            if(self.itemInfo.orgid>=0) {\n                self.$utility.setDepetList(self.treeData, self.itemInfo.orgid, arr);\n                arr[0].split(\",\").forEach((item)=>{\n                    self.itemInfo.orgids.push(parseInt(item, 10));\n                });\n            }\n        },\n        // 显示详情\n        showInfo(item){\n            let self = this;\n            for(var key in item) {\n                self.itemInfo[key] = item[key];\n            }\n            self.isInfo = true;\n        },\n\n        // 保存公司\n        saveAction(){\n            let self = this;\n            \n            if(self.itemInfo.username.trim().length<2||self.itemInfo.username.trim().length>50) {\n                self.$Message.error(\"用户账号至少2到50位字符\");\n                return;\n            }\n            \n            // 新增是秘密必传\n            if(!self.itemInfo.id){\n                if(self.newPassword.trim().length<6||self.newPassword.trim().length>18) {\n                    self.$Message.error(\"登录密码至少6到18位字符\");\n                    return;\n                }\n            }\n\n            self.roleList.forEach((item)=>{\n                if(self.itemInfo.rolename == item.name) {\n                    self.itemInfo.roleid = item.id;\n                }\n            });\n            \n            self.disable = true;\n            self.axios({\n                method: 'post',\n                headers: {\n                    token: self.userInfo.token\n                },\n                url: !self.itemInfo.id?self.$config.action.userAdd:self.$config.action.userEdit,\n                data: {\n                    \"id\": self.itemInfo.id||\"\", \n                    \"email\": self.itemInfo.email,\n                    \"mobile\": self.itemInfo.mobile,\n                    \"roleid\": self.itemInfo.roleid,\n                    \"nickname\": self.itemInfo.nickname,\n                    \"password\": !!self.newPassword?md5(self.newPassword):\"\",\n                    \"username\": self.itemInfo.username,\n                    \"orgid\": self.itemInfo.orgids[self.itemInfo.orgids.length-1],\n                }\n            })\n            .then(function (res) {\n                if(res.data.code=='0') {\n                    self.$Message.success(\"提交成功\");\n                    self.getList(false);\n                    self.isDetail = false;\n                    self.itemInfo = {\n                        \"id\": \"\",\n                        \"email\": \"\",\n                        \"roleid\": \"\",\n                        \"mobile\": \"\",\n                        \"nickname\": \"\",\n                        \"password\": \"\",\n                        \"username\": \"\",\n                        \"orgids\": [],\n                        \"orgid\": \"\",\n                    };\n                } else if(res.data.code=='9003') {\n                    self.utility.loginTimeOut(self);\n                } else {\n                    self.$Message.error(res.data.msg);\n                }\n                self.disable = false;\n            })\n            .catch(function (error) {\n                console.log(error);\n                self.disable = false;\n            });\n        },\n        // 删除用户\n        deleteAction(item){\n            let self = this;\n            self.$Modal.confirm({\n                \"title\": \"确定删除\"+ item.username+\"?\",\n                onOk() {\n                    self.axios({\n                        method: 'post',\n                        headers: {\n                            token: self.userInfo.token\n                        },\n                        url: self.$config.action.userDelete,\n                        data: {\n                            \"id\": item.id,\n                        }\n                    })\n                    .then(function (res) {\n                        if(res.data.code=='0') {\n                            self.$Message.success(\"删除成功\");\n                            self.getList(true);\n                        } else if(res.data.code=='9003') {\n                            self.utility.loginTimeOut(self);\n                        } else {\n                            self.$Message.error(res.data.msg);\n                        }\n                    })\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n                }\n            });\n        },\n        // 启用或禁用\n        enableOrNot(value, row){\n            let self = this;\n            self.axios({\n                method: 'post',\n                headers: {\n                    token: self.userInfo.token\n                },\n                url: value==1?self.$config.action.userEnable:self.$config.action.userDisable,\n                data: {\n                    \"id\": row.id\n                }\n            })\n            .then(function (res) {\n                if (res.data.code == '0') {\n                    self.$Message.success(\"修改成功\");\n                    self.getList(false);\n                } else if (res.data.code == \"419\") {\n                    self.$utility.loginTimeOut(self);\n                } else {\n                    self.$Message.error(res.data.msg);\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n        },\n\n        getRoleList(){\n            var self = this;\n            self.axios({\n                method: 'get',\n                headers: {\n                    token: self.userInfo.token\n                },\n                url: self.$config.action.roleList,\n                params: {\n                    \"pageNum\": 1,\n                    \"pageSize\": 1000,\n                }\n            })\n            .then(function (res) {\n                self.roleList = res.data.list;\n                if(res.data.code=='0') {\n                    self.roleList = res.data.list;\n                } else if(res.data.code=='9003') {\n                    self.utility.loginTimeOut(self);\n                } else {\n                    self.$Message.error(res.data.msg);\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n        },\n        // 获取用户列表\n        getDepetList(bool){\n            var self = this;\n            self.axios({\n                method: 'get',\n                headers: {\n                    token: self.userInfo.token\n                },\n                url: self.$config.action.orgList,\n                params: {\n                    \"pageNum\": 1,\n                    \"pageSize\": 10000\n                }\n            })\n            .then(function (res) {\n                let depetArr = [];\n                let arr = [];\n                self.realTimeDataList = res.data.list;\n                self.count = res.data.total;\n                self.treeData = [];\n\n                self.realTimeDataList.forEach((item,index)=>{\n                    self.realTimeDataList[index][\"label\"] = item.name;\n                    self.realTimeDataList[index][\"value\"] = item.id;\n                });\n\n                //第一种： filter 方式\n                function setTreeData(source){\n                    let cloneData = source;     // 对源数据深度克隆\n                    return  cloneData.filter(father=>{                      // 循环所有项，并添加children属性\n                        let branchArr = cloneData.filter(child=>father.id == child.pid);       // 返回每一项的子级数组\n                        branchArr.length>0 ? father.children=branchArr : []   //给父级添加一个children属性，并赋值\n                        return father.pid==0;      //返回第一层\n                    });\n                }\n                self.treeData = setTreeData(self.realTimeDataList);\n                self.isLoading = false;\n            })\n            .catch(function (error) {\n                console.log(error);\n                self.isLoading = false;\n            });\n        },\n\n        // 文件上传中\n        progressing(){\n            let self = this;\n            self.disabled = true;\n        },\n        // 上传失败\n        errorUpload(error){\n            let self = this;\n            self.disabled = false;\n            console.log(error);\n        },\n        // \n        uploadSuccess(response, file, fileList){\n            let self = this;\n            self.disabled = false;\n            if(!!response.data&&response.data.length>0) {\n                console.log(response, file, fileList);\n            } else {\n                self.$Message.info({\n                    content: response.message,\n                    duration: 0,\n                    closable: true\n                });\n            }\n        },\n    },\n    created() {\n        let self = this;\n        let userTimeOut = null;\n        self.userInfo = self.$utility.getLocalStorage(\"userInfo\");\n        self.userFuncInfo = self.$utility.getSessionStorage(\"userFuncInfo\");\n        self.userFuncCode = self.$utility.getSessionStorage(\"userFuncCode\");\n        \n        self.getList(true);\n        self.getRoleList();\n        self.getDepetList();\n\n        self.$watch('searchInfo', function () {\n            clearTimeout(userTimeOut);\n            userTimeOut = setTimeout(() => {\n                self.getList(true);\n            }, 200);\n        }, {\n            deep: true\n        });\n    },\n    mounted() {\n        let self = this;\n        let resizeTime = null;\n        window.onresize = function() {\n            clearTimeout(resizeTime);\n            resizeTime = setTimeout(function () {\n                self.height = window.innerHeight;\n            }, 500);\n        };\n    },\n    beforeDestroy(){\n\n    }\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/common/unit.less\";\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./users.vue?vue&type=template&id=497a081e&\"\nimport script from \"./users.vue?vue&type=script&lang=js&\"\nexport * from \"./users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./users.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./users.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}